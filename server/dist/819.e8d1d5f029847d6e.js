"use strict";(self.webpackChunkngx_admin=self.webpackChunkngx_admin||[]).push([[819],{9819:(V,v,i)=>{i.r(v),i.d(v,{AuthModule:()=>z});var f=i(60),t=i(3075),m=i(5652),_=i(4466),y=i(1377),u=i(8406),o=i(5e3),b=i(9047);let Z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngx-pages"]],decls:4,vars:0,consts:[["windowMode",""]],template:function(e,r){1&e&&(o.TgZ(0,"nb-layout",0)(1,"nb-layout-column"),o._UZ(2,"app-loader")(3,"router-outlet"),o.qZA()())},directives:[m.Aqw,m.dP_,b.R,u.lC],styles:["[_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}@keyframes fade{0%{opacity:0}to{opacity:1}}"]}),n})();var w=i(7489),T=i(6354),p=i(9315),g=i(8543);function C(n,l){1&n&&(o.TgZ(0,"small",18),o._uU(1,"Please enter email address"),o.qZA())}function F(n,l){1&n&&(o.TgZ(0,"small",18),o._uU(1,"Please enter valid email address"),o.qZA())}function P(n,l){if(1&n&&(o.TgZ(0,"div",16),o.YNc(1,C,2,0,"small",17),o.YNc(2,F,2,0,"small",17),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",null==e.form||null==e.form.email||null==e.form.email.errors?null:e.form.email.errors.required),o.xp6(1),o.Q6J("ngIf",null==e.form||null==e.form.email||null==e.form.email.errors?null:e.form.email.errors.email)}}function A(n,l){1&n&&(o.TgZ(0,"small",18),o._uU(1,"Please enter password"),o.qZA())}function k(n,l){if(1&n&&(o.TgZ(0,"div",16),o.YNc(1,A,2,0,"small",17),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",null==e.form||null==e.form.password||null==e.form.password.errors?null:e.form.password.errors.required)}}let I=(()=>{class n{constructor(e,r,a,s){this.formBuilder=e,this.toasterService=r,this.authenticateService=a,this.router=s,this.submitted=!1,this.isErrors=!1,this.errMessage="",this.authenticateService.isLoggedIn&&!(0,w.isEmpty)(this.authenticateService.currentUserValue)&&this.router.navigate(["/pages/dashboard"])}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",[t.kI.required,t.kI.email]],password:["",[t.kI.required]]})}get form(){return this.loginForm.controls}onSubmit(){this.submitted=!0,this.loginForm.invalid||this.authenticateService.login(this.loginForm.value).subscribe({next:e=>{e&&1===e.responseCode?(this.loginForm.reset(),this.router.navigate(["/pages/dashboard"])):this.toasterService.showToast("slash-outline","danger",e&&0===e.responseCode?e.message:"An error occured ! Please try again")},error:e=>{var r;this.errMessage=(null==e?void 0:e.message)?null==e?void 0:e.message:null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.message,this.toasterService.showToast("slash-outline","danger",this.errMessage)},complete:()=>{}}),this.submitted=!1}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(t.qu),o.Y36(T.M),o.Y36(p.i),o.Y36(u.F0))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngx-login"]],decls:22,vars:6,consts:[[1,"container"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"card","shadow-2-strong",2,"border-radius","1rem"],[1,"card-body","p-5","text-center"],[1,"mb-5"],[3,"formGroup","ngSubmit"],[1,"form-outline","mb-4"],["type","email","placeholder","Email address","formControlName","email","autoFocus","","nbInput","","fullWidth","","id","form1Example1",1,"form-control",3,"status"],["class","error",4,"ngIf"],["type","password","placeholder","Password","formControlName","password","nbInput","","fullWidth","","id","form1Example2",1,"form-control",3,"status"],[1,"row","mb-4"],[1,"col","d-flex","justify-content-center"],[1,"col"],["routerLink","/auth/forgot-password"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"error"],["class","form-control-feedback",4,"ngIf"],[1,"form-control-feedback"]],template:function(e,r){1&e&&(o.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),o._uU(7,"Sign in"),o.qZA(),o.TgZ(8,"form",6),o.NdJ("ngSubmit",function(){return r.onSubmit()}),o.TgZ(9,"div",7),o._UZ(10,"input",8),o.YNc(11,P,3,2,"div",9),o.qZA(),o.TgZ(12,"div",7),o._UZ(13,"input",10),o.YNc(14,k,2,1,"div",9),o.qZA(),o.TgZ(15,"div",11),o._UZ(16,"div",12),o.TgZ(17,"div",13)(18,"a",14),o._uU(19,"Forgot password?"),o.qZA()()(),o.TgZ(20,"button",15),o._uU(21,"Sign in"),o.qZA()()()()()()()()),2&e&&(o.xp6(8),o.Q6J("formGroup",r.loginForm),o.xp6(2),o.s9C("status",null!=r.form&&null!=r.form.email&&r.form.email.invalid&&(null!=r.form&&null!=r.form.email&&r.form.email.dirty||null!=r.form&&null!=r.form.email&&r.form.email.touched)?"danger":""),o.xp6(1),o.Q6J("ngIf",(null==r.form||null==r.form.email?null:r.form.email.invalid)&&((null==r.form||null==r.form.email?null:r.form.email.dirty)||(null==r.form||null==r.form.email?null:r.form.email.touched))),o.xp6(2),o.s9C("status",null!=r.form&&null!=r.form.password&&r.form.password.invalid&&(null!=r.form&&null!=r.form.password&&r.form.password.dirty||null!=r.form&&null!=r.form.password&&r.form.password.touched)?"danger":""),o.xp6(1),o.Q6J("ngIf",(null==r.form||null==r.form.password?null:r.form.password.invalid)&&((null==r.form||null==r.form.password?null:r.form.password.dirty)||(null==r.form||null==r.form.password?null:r.form.password.touched))),o.xp6(6),o.Q6J("disabled",(null==r.loginForm?null:r.loginForm.invalid)||r.submitted))},directives:[t._Y,t.JL,t.sg,t.Fj,m.h8i,t.JJ,t.u,g.h,f.O5,u.yS],styles:["nb-checkbox[_ngcontent-%COMP%]{margin-bottom:1rem}.form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}"]}),n})();var h=i(655),d=i(1375);function S(n,l){if(1&n&&(o.TgZ(0,"p",12),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.errMessage)}}function x(n,l){1&n&&(o.TgZ(0,"small",14),o._uU(1,"Please enter email address"),o.qZA())}function U(n,l){1&n&&(o.TgZ(0,"small",14),o._uU(1,"Please enter valid email address"),o.qZA())}function J(n,l){if(1&n&&(o.TgZ(0,"div",12),o.YNc(1,x,2,0,"small",13),o.YNc(2,U,2,0,"small",13),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",null==e.form||null==e.form.email||null==e.form.email.errors?null:e.form.email.errors.required),o.xp6(1),o.Q6J("ngIf",null==e.form||null==e.form.email||null==e.form.email.errors?null:e.form.email.errors.email)}}let q=(()=>{class n{constructor(e,r){this.formBuilder=e,this.authenticateService=r,this.submitted=!1,this.isErrors=!1,this.errMessage="",this.onSubmit=()=>(0,h.mG)(this,void 0,void 0,function*(){var a;if(this.submitted=!0,this.forgotForm.invalid)this.submitted=!1;else{try{const s=yield this.authenticateService.forgotPassword(this.forgotForm.value);s&&1===s.responseCode?yield(0,d.Cq)("We have sent you a reset link to your registered email."):s&&0===s.responseCode?yield(0,d.sD)(s.message):yield(0,d.sD)("Something went wrong ! Please try again")}catch(s){yield(0,d.sD)(null===(a=null==s?void 0:s.error)||void 0===a?void 0:a.message)}this.forgotForm.reset(),this.submitted=!1}})}ngOnInit(){this.forgotForm=this.formBuilder.group({email:["",[t.kI.required,t.kI.email]]})}get form(){return this.forgotForm.controls}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(t.qu),o.Y36(p.i))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngx-forgot-password"]],decls:23,vars:5,consts:[[1,"container"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"card","shadow-2-strong",2,"border-radius","1rem"],[1,"card-body","p-5","text-center"],[1,"mb-4"],[3,"formGroup","ngSubmit"],["class","error",4,"ngIf"],[1,"form-outline","mb-4"],["type","email","placeholder","Email address","formControlName","email","autoFocus","","nbInput","","fullWidth","","id","form1Example1",1,"form-control",3,"status"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],["routerLink","/auth/login"],[1,"error"],["class","form-control-feedback",4,"ngIf"],[1,"form-control-feedback"]],template:function(e,r){1&e&&(o.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),o._uU(7,"Forgot Password!"),o.qZA(),o.TgZ(8,"p"),o._uU(9,"Enter your email address below and we'll send you a link to reset your password!"),o.qZA(),o.TgZ(10,"form",6),o.NdJ("ngSubmit",function(){return r.onSubmit()}),o.YNc(11,S,2,1,"p",7),o.TgZ(12,"div",8),o._UZ(13,"input",9),o.YNc(14,J,3,2,"div",7),o.qZA(),o.TgZ(15,"button",10),o._uU(16,"Submit"),o.qZA(),o._UZ(17,"hr"),o.TgZ(18,"p"),o._uU(19,"Already have password, "),o.TgZ(20,"a",11),o._uU(21," Sign In"),o.qZA(),o._uU(22," here."),o.qZA()()()()()()()()),2&e&&(o.xp6(10),o.Q6J("formGroup",r.forgotForm),o.xp6(1),o.Q6J("ngIf",r.isErrors),o.xp6(2),o.s9C("status",null!=r.form&&null!=r.form.email&&r.form.email.invalid&&(null!=r.form&&null!=r.form.email&&r.form.email.dirty||null!=r.form&&null!=r.form.email&&r.form.email.touched)?"danger":""),o.xp6(1),o.Q6J("ngIf",(null==r.form||null==r.form.email?null:r.form.email.invalid)&&((null==r.form||null==r.form.email?null:r.form.email.dirty)||(null==r.form||null==r.form.email?null:r.form.email.touched))),o.xp6(1),o.Q6J("disabled",(null==r.forgotForm?null:r.forgotForm.invalid)||r.submitted))},directives:[t._Y,t.JL,t.sg,f.O5,t.Fj,m.h8i,t.JJ,t.u,g.h,u.yS],styles:[""]}),n})();var N=i(4921),Y=i(6553),M=i(1816);function E(n,l){1&n&&(o.TgZ(0,"small",17),o._uU(1,"Please enter password"),o.qZA())}function R(n,l){1&n&&(o.TgZ(0,"small",17),o._uU(1,"Password must be min 8 chars including one uppercase, one special character and alphanumeric"),o.qZA())}function Q(n,l){if(1&n&&(o.TgZ(0,"div",15),o.YNc(1,E,2,0,"small",16),o.YNc(2,R,2,0,"small",16),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",null==e.form||null==e.form.password||null==e.form.password.errors?null:e.form.password.errors.required),o.xp6(1),o.Q6J("ngIf",null==e.form||null==e.form.password||null==e.form.password.errors?null:e.form.password.errors.pattern)}}function L(n,l){1&n&&(o.TgZ(0,"small",17),o._uU(1,"Please confirm password"),o.qZA())}function O(n,l){1&n&&(o.TgZ(0,"small",17),o._uU(1,"Passwords doesn't match"),o.qZA())}function B(n,l){if(1&n&&(o.TgZ(0,"div",15),o.YNc(1,L,2,0,"small",16),o.YNc(2,O,2,0,"small",16),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",null==e.form.confirm_password||null==e.form.confirm_password.errors?null:e.form.confirm_password.errors.required),o.xp6(1),o.Q6J("ngIf",null==e.form.confirm_password||null==e.form.confirm_password.errors?null:e.form.confirm_password.errors.confirmedValidator)}}function G(n,l){if(1&n){const e=o.EpF();o.TgZ(0,"form",9),o.NdJ("ngSubmit",function(){return o.CHM(e),o.oxw().onSubmit()}),o.TgZ(1,"p"),o._uU(2,"Please enter your new credentials"),o.qZA(),o.TgZ(3,"div",10),o._UZ(4,"input",11),o.YNc(5,Q,3,2,"div",12),o.qZA(),o.TgZ(6,"div",10),o._UZ(7,"input",13),o.YNc(8,B,3,2,"div",12),o.qZA(),o.TgZ(9,"button",14),o._uU(10,"Submit"),o.qZA()()}if(2&n){const e=o.oxw();o.Q6J("formGroup",e.resetForm),o.xp6(4),o.s9C("status",null!=e.form&&null!=e.form.password&&e.form.password.invalid&&(null!=e.form&&null!=e.form.password&&e.form.password.dirty||null!=e.form&&null!=e.form.password&&e.form.password.touched)?"danger":""),o.xp6(1),o.Q6J("ngIf",(null==e.form||null==e.form.password?null:e.form.password.invalid)&&((null==e.form||null==e.form.password?null:e.form.password.dirty)||(null==e.form||null==e.form.password?null:e.form.password.touched))),o.xp6(2),o.s9C("status",null!=e.form&&null!=e.form.confirm_password&&e.form.confirm_password.invalid&&(null!=e.form&&null!=e.form.confirm_password&&e.form.confirm_password.dirty||null!=e.form&&null!=e.form.confirm_password&&e.form.confirm_password.touched)?"danger":""),o.xp6(1),o.Q6J("ngIf",(null==e.form.confirm_password?null:e.form.confirm_password.invalid)&&((null==e.form.confirm_password?null:e.form.confirm_password.dirty)||(null==e.form.confirm_password?null:e.form.confirm_password.touched))),o.xp6(1),o.Q6J("disabled",(null==e.resetForm?null:e.resetForm.invalid)||e.submitted)}}function j(n,l){1&n&&(o.TgZ(0,"div")(1,"p"),o._uU(2,"Your password has reset successfully !"),o.qZA()())}function D(n,l){1&n&&(o.TgZ(0,"div")(1,"p"),o._uU(2,"This link has expired, please request new link to reset your password"),o.qZA()())}const W=[{path:"",component:Z,children:[{path:"login",component:I},{path:"forgot-password",component:q},{path:"reset-password",component:(()=>{class n{constructor(e,r,a){this.formBuilder=e,this.authenticateService=r,this.router=a,this.submitted=!1,this.linkExpired=!1,this.success=!1,this.token="",this.checkResetTokenExpiry=s=>(0,h.mG)(this,void 0,void 0,function*(){try{const c=yield this.authenticateService.validateResetToken(s);this.linkExpired=!c||1!==c.responseCode||!1!==c.tokenExpiry}catch(c){return}}),this.onSubmit=()=>(0,h.mG)(this,void 0,void 0,function*(){try{if(this.success=!1,this.submitted=!0,this.resetForm.invalid)return void(this.submitted=!1);this.resetForm.value.token=this.token;const s=yield this.authenticateService.resetPassword(this.resetForm.value);s&&1===s.responseCode?this.success=!0:!s||0!==s.responseCode||"iw1003"!==s.errorCode&&"iw1008"!==s.errorCode?s&&0===s.responseCode?yield(0,d.sD)(s.message):yield(0,d.sD)("Something went wrong ! Please try again"):(yield(0,d.sD)(s.message),this.router.navigate(["/auth/forgot-password"]))}catch(s){yield(0,d.sD)(s)}this.resetForm.reset(),this.submitted=!1}),this.authenticateService.isLoggedIn&&!(0,w.isEmpty)(this.authenticateService.currentUserValue)&&this.router.navigate(["/auth/login"])}ngOnInit(){const e=new URLSearchParams(window.location.search);if(e.get("token")){this.token=e.get("token");const a=(0,M.Z)(this.token).data;console.log("tokenDetails",a);const s=(new Date).getTime();console.log("currentTime",s),!a||a&&a.expiry<s?this.linkExpired=!0:this.checkResetTokenExpiry(this.token)}else this.linkExpired=!0;console.log("linkExpired",this.linkExpired),console.log("success",this.success),this.resetForm=this.formBuilder.group({password:["",[t.kI.required,t.kI.pattern(Y.HO)]],confirm_password:["",[t.kI.required]]},{validator:[(0,N.RM)("password","confirm_password")]})}get form(){return this.resetForm.controls}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(t.qu),o.Y36(p.i),o.Y36(u.F0))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngx-reset-password"]],decls:17,vars:3,consts:[[1,"container"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"card","shadow-2-strong",2,"border-radius","1rem"],[1,"card-body","p-5","text-center"],[1,"mb-4"],["class","user",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["routerLink","/auth/login"],[1,"user",3,"formGroup","ngSubmit"],[1,"form-outline","mb-4"],["type","password","placeholder","Enter your password","formControlName","password","autoFocus","","nbInput","","fullWidth","","id","form1Example1",1,"form-control",3,"status"],["class","error",4,"ngIf"],["type","password","formControlName","confirm_password","placeholder","Confirm your password","autoFocus","","nbInput","","fullWidth","",1,"form-control",3,"status"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"error"],["class","form-control-feedback",4,"ngIf"],[1,"form-control-feedback"]],template:function(e,r){1&e&&(o.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),o._uU(7,"Reset Your Password"),o.qZA(),o.YNc(8,G,11,6,"form",6),o.YNc(9,j,3,0,"div",7),o.YNc(10,D,3,0,"div",7),o._UZ(11,"hr"),o.TgZ(12,"p"),o._uU(13,"Already have password, "),o.TgZ(14,"a",8),o._uU(15," Sign In"),o.qZA(),o._uU(16," here."),o.qZA()()()()()()()),2&e&&(o.xp6(8),o.Q6J("ngIf",!r.linkExpired&&!r.success),o.xp6(1),o.Q6J("ngIf",r.success&&!r.linkExpired),o.xp6(1),o.Q6J("ngIf",r.linkExpired&&!r.success))},directives:[f.O5,t._Y,t.JL,t.sg,t.Fj,m.h8i,t.JJ,t.u,g.h,u.yS],styles:[""]}),n})()},{path:"**",component:(()=>{class n{constructor(e){this.router=e}goToLogin(){this.router.navigate(["/auth/login"])}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(u.F0))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngx-not-found"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-md-12"],[1,"flex-centered","col-xl-4","col-lg-6","col-md-8","col-sm-12"],[1,"title"],[1,"sub-title"],["type","button",1,"btn","btn-primary","btn-block",3,"click"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"nb-card")(3,"nb-card-body")(4,"div",2)(5,"h2",3),o._uU(6,"404 Page Not Found"),o.qZA(),o.TgZ(7,"small",4),o._uU(8,"The page you were looking for doesn't exist"),o.qZA(),o.TgZ(9,"button",5),o.NdJ("click",function(){return r.goToLogin()}),o._uU(10," Take Me To Login "),o.qZA()()()()()())},directives:[m.Asz,m.yKW],styles:[".flex-centered[_ngcontent-%COMP%]{margin:auto}nb-card-body[_ngcontent-%COMP%]{display:flex}.title[_ngcontent-%COMP%]{text-align:center}.sub-title[_ngcontent-%COMP%]{text-align:center;display:block;margin-bottom:3rem}.home-button[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),n})()}]}];let X=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[u.Bz.forChild(W)],u.Bz]}),n})(),z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[_.m,f.ez,t.UX,t.u5,m.BW0,m.zyh,m.nKr,m.PYG,y.O,X]]}),n})()}}]);